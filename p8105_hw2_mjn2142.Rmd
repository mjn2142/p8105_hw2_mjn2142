---
title: "p8105_hw2_mjn2142"
author: "Matthew Neky"
date: "10/5/2021"
output: github_document
---

```{r setup}
library(tidyverse)
```


### Problem 1



```{r, message = FALSE}
trash_wheel_data = readxl::read_excel("./trash_wheel.xlsx", sheet = "Mr. Trash Wheel") %>%
  janitor::clean_names() %>%
  select(dumpster:homes_powered, -month, -year, -date) %>%
  na.omit() %>% 
  mutate(
    sports_balls = round(sports_balls, digits = 0)
  )
```


### Problem 2

## Cleaning pols-month data

```{r}
pols_month_data = read_csv("./fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(
    col = mon,
    into = c('year', 'month', 'day'),
    sep = '-',
    remove = TRUE,
    convert = TRUE,
    extra = 'warn',
    fill = 'warn'
  ) %>% 
  mutate(
    month = month.abb[month],
    president = recode(prez_gop, '1' = "gop", '0' = "dem")
    ) %>% 
  select(-day, -prez_gop, -prez_dem)
```

## Clean snp data

```{r}
snp_data = read_csv("./fivethirtyeight_datasets/snp.csv") %>% 
  mutate(
    lubridate::mdy(date)
  ) %>% 
  separate(
    col = 'lubridate::mdy(date)',
    into = c('year', 'month', 'day'),
    sep = '-',
    remove = TRUE,
    convert = TRUE,
    extra = 'warn',
    fill = 'warn'
  ) %>% 
  relocate(year, month, day) %>% 
    mutate(
      month = month.abb[month],
      year = if_else(year > 2021, year - 100, as.numeric(year))
    ) %>% 
  select(-date)
```

## Clean unemployment data

```{r}
unemployment_data = read_csv("./fivethirtyeight_datasets/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment_level"
  ) %>% 
  rename(year = Year)
```

## Join datasets

```{r}
pols_snp_joined = 
  inner_join(pols_month_data, snp_data, by = c("year" = "year", "month" = "month"))

join_final =
  inner_join(pols_snp_joined, unemployment_data, by = c("year" = "year", "month" = "month"))
```

Dataset Discussion: The three datasets were merged by year and month in an inner join so only rows where all three datasets had information for shared years and month are shown. There are 786 rows and 12 columns. The first dataset contains information on political makeups of the US government during various periods of time. The second shows stock value for Standard and Poor. The third dataset contains unemployment levels across time. These datasets can be merged because they share temporal values, and together they can elucidate a clearer political-economic understanding of a specific month and year in history. The years range from 1947 to 2015. Important variables include GOP representatives and Democratic representatives, closing, and unemployment.These show how political power, stock prices, and unemployment are connected.

### Problem 3

Read in and tidy baby names data

```{r}
baby_names = read_csv("./Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    ethnicity = replace(ethnicity, ethnicity == "ASIAN AND PACI", "ASIAN AND PACIFIC ISLANDER"),
    ethnicity = replace(ethnicity, ethnicity == "BLACK NON HISP", "BLACK NON HISPANIC"),
    ethnicity = replace(ethnicity, ethnicity == "WHITE NON HISP", "WHITE NON HISPANIC")
  ) %>% 
  distinct(year_of_birth, ethnicity, childs_first_name, .keep_all = TRUE)
```


Table of "Olivia" Popularity over Time

```{r}
olivia_df = pivot_wider(
  baby_names,
  names_from = year_of_birth,
  values_from = count
) %>% 
  filter(childs_first_name == "Olivia")
```



